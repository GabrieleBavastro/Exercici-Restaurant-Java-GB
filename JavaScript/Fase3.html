<!DOCTYPE html>
<html>
<body>

<h2>Fase 3 - Restaurant.</h2>

<button onclick="myFunction()">Push for begin!</button>

<p id="demo"></p>

<script>
function myFunction() {
  //create arrays with data to manipulate.

	  let banknotes = [5,10,20,50,100,200,500];
    let dishes = ["Pasta", "Salad", "Pizza", "Meat","Tiramisu"];
    let prices = ["5", "10", "15", "25", "5"];

    let euro = "€"
    let total = [];


  //Show the menu.
    var text=dishes.map(function(itm,i){
    return [itm,prices[i]];
    }).join(euro + '\n');

    alert("The menu of today is: " + "\n" + text + euro);


    let bill = true; //Boolean variable used for manage the while loop.
    while (bill == true) {
    let client = parseInt(prompt("What do you want to eat? 1-"+dishes[0]+" - 2-"+dishes[1]+" - 3-"+dishes[2]+
					 " - 4-"+dishes[3]+" - 5-"+dishes[4]));

      let sum = 0;
			let dish;
			let more;
			let i = (client - 1);

      //Create an if, for ask if they want to eat something more.
			if (i<5) {
				dish = dishes[i];
				total.push(parseInt(prices[i])); //Add the price of the dish in total array.
        more = prompt("You chosed: " + dish + " do you want something more to eat?"
        + "\n" +" 1-Yes / 2-No.");
				if (more == 1) {
          bill = true;//If 1 continue inside of the loop.					
				} else if (more == 2) { //If 2 exit the loop and ask for the bill.
					bill = false;
				} else {
					System.out.println("Please chose a number between 1 and 2.");
				}
        }
      else {alert("Please chose a number between 1 and 5.");}
				//After the error message automatically ask again the question.
      }
    if (bill == false) {
    let sum = parseInt(total.reduce((a, b) => a + b, 0))
    alert("The total bill is: " + sum + "€.");
    /* When the bill is calculated, begin a do while loop for calculate 
		which is the best way to receive the payment by cash.*/
    
    let ammount;
    let arrayChange = [];
    
    for (let j=banknotes.length ; j >= 0; j--){
                if (sum >= banknotes[j]){
                    do { 
                        ammount = sum - banknotes[j]; 
                        arrayChange.push(banknotes[j]); 
                        sum = ammount
                    } while (sum > banknotes[j])
                  }
                }
                var text=arrayChange.map(function(itm,i){
                return [itm,euro];
                  }).join('\n');

                alert("The client have to pay with those banknotes:" + "\n" + text);

    }
}
</script>

</body>
</html>